<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <div th:fragment="footer" class="mt-5 py-4 bg-light text-center">
    <div class="container">
      <p class="text-muted mb-0">
        © 2025 BookBuddy - 영남대학교 전공책 중고거래 플랫폼
      </p>
    </div>

    <!-- [Chat] 채팅 팝업 포함 -->
    <div th:replace="~{fragments/chatPopup :: chatPopup}"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 알림 개수 체크 -->
    <script th:if="${session.loginMember != null}">
        function checkNotifications() {
            fetch('/api/notifications/count')
                .then(function(response) { return response.json(); })
                .then(function(count) {
                    var badge = document.getElementById('notificationBadge');
                    if (badge) {
                        if (count > 0) {
                            badge.textContent = count;
                            badge.style.display = 'inline';
                        } else {
                            badge.style.display = 'none';
                        }
                    }
                })
                .catch(function(error) {
                    console.error('알림 확인 에러:', error);
                });
        }
        
        // 페이지 로드 시 체크
        checkNotifications();
        
        // 30초마다 체크
        setInterval(checkNotifications, 30000);
    </script>
  </div>
</html>
