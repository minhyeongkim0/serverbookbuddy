5\. State machine diagram

본 절에서는 BookBuddy 시스템에서의 도서 거래 절차를 시간 순서에 따라
표현한 스테이트 머신 다이어그램과 로그인을 시작으로 사이트의 기능 절차를
표현한 스테이트머신 다이어그램을 제시한다.

**5.1 거래 절차**

> 해당 다이어그램은 구매자(Buyer), 판매자(Seller), 관리자(Admin),
> 데이터베이스(DB) 간의 상호작용을 중심으로 거래 생성부터 송금
> 완료까지의 전체 흐름을 나타낸다.
>
> 거래 절차는 다음과 같은 6단계 절차로 구성된다.
>
> 각 단계는 거래 상태(Trade.status) 및 결제 상태(paymentStatus)의 변화를
> 수반하며, 모든 단계는 데이터베이스에 실시간으로 반영된다.
>
> ① 판매자 :
>
> 도서 판매 글 등록, 거래 미생성 (null)
>
> ② 구매자 ↔ 판매자 :
>
> 채팅을 통한 거래 협의, 거래 전 (Pre-Trade)
>
> ③ 구매자 → 관리자 :
>
> 구매자가 입금 요청, 거래 중 (In-Progress, paymentStatus="입금 완료")
>
> ④ 판매자 ↔ 구매자 :
>
> 대면 직거래 진행, 거래 중 유지
>
> ⑤ 구매자 :
>
> 거래 완료 버튼 클릭 → 상태 전환, 거래 완료 (Completed)
>
> ⑥ 관리자 :
>
> 거래 상태 검증 후 판매자에게 송금, 송금 완료 (Transferred)
>
> <img src="media/image64.bmp" style="width:3.69194in;height:2.32236in" />State
> machine diagram

**5.2 웹 사이트**

해당 다이어그램은 사용자가 사이트에 접속한 이후부터 거래 종료에
이르기까지의

> 주요 서비스 이용 절차를 상태 전이 형태로 나타낸다.
>
> BookBuddy는 다음과 같은 단계를 통해 서비스가 진행된다:
>
> ① 비회원 상태(Guest) :

사이트 접속, 로그인 및 회원가입 가능

로그인 성공 시 회원(Member) 상태로 전이

> ② 회원 상태(Member) :

로그인된 사용자로서 도서 등록, 도서 검색, 거래 요청 등 핵심 기능 수행
가능

판매자는 도서를 등록하고, 구매자는 판매글을 확인 후 거래를 제안함

> ③ 거래 진행 상태(Trade) :

구매자, 판매자, 관리자 간 거래가 진행되는 상태

거래 요청 → 입금 확인 → 직거래 완료 → 송금 처리 단계를 거침

> ④ 거래 종료(Finished) :

관리자가 거래 완료를 확인하고 송금 처리를 끝내면 전체 거래가 종료됨

이후 회원은 다시 일반 회원 상태로 복귀하거나 로그아웃을 통해 종료 가능

<img src="media/image65.bmp" style="width:5.02528in;height:5.63806in" />

\[그림 - \] State machine diagram
